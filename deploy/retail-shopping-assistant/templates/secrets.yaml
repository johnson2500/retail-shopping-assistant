{{/*
SPDX-FileCopyrightText: Copyright (c) 2024-2026 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
SPDX-License-Identifier: Apache-2.0
*/}}

{{- if .Values.secrets.create }}
---
# NVIDIA API Keys Secret
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "retail-shopping-assistant.nvidiaApiKeys.name" . }}
  namespace: {{ include "retail-shopping-assistant.namespace" . }}
  labels:
    {{- include "retail-shopping-assistant.labels" . | nindent 4 }}
type: Opaque
stringData:
  ngc-api-key: {{ .Values.secrets.ngcApiKey | quote }}
  llm-api-key: {{ .Values.secrets.ngcApiKey | quote }}
  embed-api-key: {{ .Values.secrets.ngcApiKey | quote }}
  nvidia-api-key: {{ .Values.secrets.ngcApiKey | quote }}
---
# MinIO Credentials Secret
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "retail-shopping-assistant.minioCredentials.name" . }}
  namespace: {{ include "retail-shopping-assistant.namespace" . }}
  labels:
    {{- include "retail-shopping-assistant.labels" . | nindent 4 }}
type: Opaque
stringData:
  access-key: {{ .Values.secrets.minioAccessKey | quote }}
  secret-key: {{ .Values.secrets.minioSecretKey | quote }}
{{- if .Values.secrets.postgres.enabled }}
---
# PostgreSQL Credentials Secret
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "retail-shopping-assistant.postgresCredentials.name" . }}
  namespace: {{ include "retail-shopping-assistant.namespace" . }}
  labels:
    {{- include "retail-shopping-assistant.labels" . | nindent 4 }}
type: Opaque
stringData:
  username: {{ .Values.secrets.postgres.username | quote }}
  password: {{ .Values.secrets.postgres.password | quote }}
{{- end }}
{{- end }}
